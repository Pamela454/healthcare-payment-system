{"ast":null,"code":"import { accountUpdate } from \"../actions/currentAccount\";\nexport const addPayment = payment => {\n  return {\n    type: \"ADD_PAYMENT\",\n    payload: payment\n  };\n};\nexport const newPayment = (paymentData, history) => {\n  console.log(\"newPayment.paymentData is: \");\n  console.log(paymentData);\n  console.log(\"newPayment.history is: \");\n  console.log(history);\n  debugger;\n  return dispatch => {\n    console.log(\"about to fetch!\");\n    console.log(paymentData);\n    const url = `http://localhost:3001/api/v1/accounts/${paymentData.account_id}/payments/new`;\n    console.log(\"url is: \" + url);\n    return fetch(url, {\n      method: \"POST\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(paymentData)\n    }).then(res => res.json()).then(payment => {\n      console.log(\"payment response\");\n      console.log(payment);\n\n      if (payment.error) {\n        console.log(\"error is: \");\n        console.log(payment.error);\n        alert(\"error\");\n      } else {\n        console.log(\"payment.data: \");\n        console.log(payment.data.relationships.data);\n        dispatch(addPayment(payment.data));\n        accountUpdate(payment.data.relationships.data)(dispatch); //call additional action to update account\n\n        history.push(`/accounts/${paymentData.account_id}`);\n      }\n    }).catch(console.log);\n  };\n};\n/*let chargeToken = this.props.stripe.createToken({name: \"Name\"})\n  let charge = {\n     amount: form.amount,\n     cardnumber: form.cardnumber,\n     expiration: form.expiration,\n     cvc: form.cvc,\n     token: chargeToken.token.id \n  } */","map":{"version":3,"sources":["/Users/pamela/healthcare-payment-system/frontend/src/actions/currentPayments.js"],"names":["accountUpdate","addPayment","payment","type","payload","newPayment","paymentData","history","console","log","dispatch","url","account_id","fetch","method","credentials","headers","body","JSON","stringify","then","res","json","error","alert","data","relationships","push","catch"],"mappings":"AAAA,SAASA,aAAT,QAA8B,2BAA9B;AAEA,OAAO,MAAMC,UAAU,GAAIC,OAAD,IAAa;AACrC,SAAO;AACLC,IAAAA,IAAI,EAAE,aADD;AAELC,IAAAA,OAAO,EAAEF;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAMG,UAAU,GAAG,CAACC,WAAD,EAAcC,OAAd,KAA0B;AAClDC,EAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYH,WAAZ;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACA;AACA,SAAQG,QAAD,IAAc;AACnBF,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYH,WAAZ;AACA,UAAMK,GAAG,GAAI,yCAAwCL,WAAW,CAACM,UAAW,eAA5E;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAaE,GAAzB;AACA,WAAOE,KAAK,CAACF,GAAD,EAAM;AAChBG,MAAAA,MAAM,EAAE,MADQ;AAEhBC,MAAAA,WAAW,EAAE,aAFG;AAGhBC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAHO;AAMhBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeb,WAAf;AANU,KAAN,CAAL,CAQJc,IARI,CAQEC,GAAD,IAASA,GAAG,CAACC,IAAJ,EARV,EASJF,IATI,CASElB,OAAD,IAAa;AACjBM,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYP,OAAZ;;AACA,UAAIA,OAAO,CAACqB,KAAZ,EAAmB;AACjBf,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYP,OAAO,CAACqB,KAApB;AACAC,QAAAA,KAAK,CAAC,OAAD,CAAL;AACD,OAJD,MAIO;AACLhB,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYP,OAAO,CAACuB,IAAR,CAAaC,aAAb,CAA2BD,IAAvC;AACAf,QAAAA,QAAQ,CAACT,UAAU,CAACC,OAAO,CAACuB,IAAT,CAAX,CAAR;AACAzB,QAAAA,aAAa,CAACE,OAAO,CAACuB,IAAR,CAAaC,aAAb,CAA2BD,IAA5B,CAAb,CAA+Cf,QAA/C,EAJK,CAKL;;AACAH,QAAAA,OAAO,CAACoB,IAAR,CAAc,aAAYrB,WAAW,CAACM,UAAW,EAAjD;AACD;AACF,KAxBI,EAyBJgB,KAzBI,CAyBEpB,OAAO,CAACC,GAzBV,CAAP;AA0BD,GA/BD;AAgCD,CAtCM;AAwCP;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { accountUpdate } from \"../actions/currentAccount\";\n\nexport const addPayment = (payment) => {\n  return {\n    type: \"ADD_PAYMENT\",\n    payload: payment,\n  };\n};\n\nexport const newPayment = (paymentData, history) => {\n  console.log(\"newPayment.paymentData is: \");\n  console.log(paymentData);\n  console.log(\"newPayment.history is: \");\n  console.log(history);\n  debugger;\n  return (dispatch) => {\n    console.log(\"about to fetch!\");\n    console.log(paymentData);\n    const url = `http://localhost:3001/api/v1/accounts/${paymentData.account_id}/payments/new`;\n    console.log(\"url is: \" + url);\n    return fetch(url, {\n      method: \"POST\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(paymentData),\n    })\n      .then((res) => res.json())\n      .then((payment) => {\n        console.log(\"payment response\");\n        console.log(payment);\n        if (payment.error) {\n          console.log(\"error is: \");\n          console.log(payment.error);\n          alert(\"error\");\n        } else {\n          console.log(\"payment.data: \");\n          console.log(payment.data.relationships.data);\n          dispatch(addPayment(payment.data));\n          accountUpdate(payment.data.relationships.data)(dispatch);\n          //call additional action to update account\n          history.push(`/accounts/${paymentData.account_id}`);\n        }\n      })\n      .catch(console.log);\n  };\n};\n\n/*let chargeToken = this.props.stripe.createToken({name: \"Name\"})\n  let charge = {\n     amount: form.amount,\n     cardnumber: form.cardnumber,\n     expiration: form.expiration,\n     cvc: form.cvc,\n     token: chargeToken.token.id \n  } */\n"]},"metadata":{},"sourceType":"module"}