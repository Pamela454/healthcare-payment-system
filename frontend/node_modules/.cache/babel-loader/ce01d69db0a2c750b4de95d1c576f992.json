{"ast":null,"code":"//action creators\nexport const setCurrentAccount = account => {\n  console.log(account);\n  return {\n    type: \"SET_CURRENT_ACCOUNT\",\n    //should this be add account?\n    payload: account\n  };\n};\nexport const logout = () => {\n  return {\n    type: \"CLEAR_CURRENT_ACCOUNT\"\n  };\n}; //type and payload property\n//action creator, function that returns an action\n//thunk allows return of function instead of object. Function receives dispatch function and can dispatch multiple actions.\n//needs to be revised\n\nexport const loggedIn = history => {\n  //a thunk\n  return dispatch => {\n    return fetch(\"http://localhost:3001/api/v1/logged_in\", {\n      method: \"GET\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(account => {\n      if (account.error) {\n        alert(\"error\");\n      } else {\n        console.log(account.data);\n        localStorage.setItem(\"loggedIn\", true); //can only set string, JSON.stringify to convert\n\n        dispatch(setCurrentAccount(account.data));\n        history.push(`/accounts/${account.data.id}`);\n      }\n    }).catch(console.log);\n  };\n};\nexport const login = (form, history) => {\n  return dispatch => {\n    return fetch(\"http://localhost:3001/api/v1/login\", {\n      method: \"POST\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(form)\n    }).then(res => res.json()).then(account => {\n      console.log(account);\n\n      if (account.error || account === null || account === undefined) {\n        console.log(\"no\");\n      } else {\n        console.log(\"yes\");\n        console.log(account.data);\n        localStorage.setItem(\"loggedIn\", true);\n        dispatch(setCurrentAccount(account.data));\n        history.push(`/accounts/${account.data.id}`);\n      }\n    }).catch(console.log);\n  };\n}; //should we be using async/await?\n\nexport const signup = (form, history) => {\n  return dispatch => {\n    console.log();\n    return fetch(\"http://localhost:3001/api/v1/signup\", {\n      method: \"POST\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(form)\n    }).then(res => res.json()) //parse JSON\n    .then(account => {\n      console.log(account);\n\n      if (account.error) {\n        console.log(\"no\");\n      } else {\n        localStorage.setItem(\"loggedIn\", true);\n        dispatch(setCurrentAccount(account.data));\n        history.push(`/accounts/${account.data.id}`);\n      }\n    }).catch(console.log);\n  };\n}; //payment data and account id\n\nexport const updateAccount = (data, history) => {\n  console.log(data.relationships.account.data.id);\n  return dispatch => {\n    fetch(`http://localhost:3001/api/v1/accounts/${data.relationships.account.data.id}`, {\n      method: \"POST\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    }).then(res => res.json()) //parse JSON\n    .then(account => {\n      console.log(account);\n\n      if (account.error) {\n        console.log(\"no\");\n      } else {\n        dispatch(setCurrentAccount(account.data));\n        history.push(`/accounts/${account.data.id}`);\n      }\n    }).catch(console.log);\n  };\n}; //export const logout = () => {\n//return dispatch => {\n//dispatch(clearCurrentAccount());\n//return fetch(\"http://localhost:3001/api/v1/logout\", {\n//credentials: 'same-origin',\n//method: \"DELETE\"\n//})\n//};\n//}","map":{"version":3,"sources":["/Users/pamela/healthcare-payment-system/frontend/src/actions/currentAccount.js"],"names":["setCurrentAccount","account","console","log","type","payload","logout","loggedIn","history","dispatch","fetch","method","credentials","headers","then","res","json","error","alert","data","localStorage","setItem","push","id","catch","login","form","body","JSON","stringify","undefined","signup","updateAccount","relationships"],"mappings":"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","sourcesContent":["//action creators\n\nexport const setCurrentAccount = (account) => {\n  console.log(account);\n  return {\n    type: \"SET_CURRENT_ACCOUNT\", //should this be add account?\n    payload: account,\n  };\n};\n\nexport const logout = () => {\n  return {\n    type: \"CLEAR_CURRENT_ACCOUNT\",\n  };\n};\n\n//type and payload property\n//action creator, function that returns an action\n//thunk allows return of function instead of object. Function receives dispatch function and can dispatch multiple actions.\n\n//needs to be revised\nexport const loggedIn = (history) => {\n  //a thunk\n  return (dispatch) => {\n    return fetch(\"http://localhost:3001/api/v1/logged_in\", {\n      method: \"GET\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((account) => {\n        if (account.error) {\n          alert(\"error\");\n        } else {\n          console.log(account.data);\n          localStorage.setItem(\"loggedIn\", true); //can only set string, JSON.stringify to convert\n          dispatch(setCurrentAccount(account.data));\n          history.push(`/accounts/${account.data.id}`);\n        }\n      })\n      .catch(console.log);\n  };\n};\n\nexport const login = (form, history) => {\n  return (dispatch) => {\n    return fetch(\"http://localhost:3001/api/v1/login\", {\n      method: \"POST\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(form),\n    })\n      .then((res) => res.json())\n      .then((account) => {\n        console.log(account);\n        if (account.error || account === null || account === undefined) {\n          console.log(\"no\");\n        } else {\n          console.log(\"yes\");\n          console.log(account.data);\n          localStorage.setItem(\"loggedIn\", true);\n          dispatch(setCurrentAccount(account.data));\n          history.push(`/accounts/${account.data.id}`);\n        }\n      })\n      .catch(console.log);\n  };\n};\n\n//should we be using async/await?\nexport const signup = (form, history) => {\n  return (dispatch) => {\n    console.log();\n    return fetch(\"http://localhost:3001/api/v1/signup\", {\n      method: \"POST\",\n      credentials: \"same-origin\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(form),\n    })\n      .then((res) => res.json()) //parse JSON\n      .then((account) => {\n        console.log(account);\n        if (account.error) {\n          console.log(\"no\");\n        } else {\n          localStorage.setItem(\"loggedIn\", true);\n          dispatch(setCurrentAccount(account.data));\n          history.push(`/accounts/${account.data.id}`);\n        }\n      })\n      .catch(console.log);\n  };\n};\n//payment data and account id\nexport const updateAccount = (data, history) => {\n  console.log(data.relationships.account.data.id);\n  return (dispatch) => {\n    fetch(\n      `http://localhost:3001/api/v1/accounts/${data.relationships.account.data.id}`,\n      {\n        method: \"POST\",\n        credentials: \"same-origin\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      }\n    )\n      .then((res) => res.json()) //parse JSON\n      .then((account) => {\n        console.log(account);\n        if (account.error) {\n          console.log(\"no\");\n        } else {\n          dispatch(setCurrentAccount(account.data));\n          history.push(`/accounts/${account.data.id}`);\n        }\n      })\n      .catch(console.log);\n  };\n};\n\n//export const logout = () => {\n//return dispatch => {\n//dispatch(clearCurrentAccount());\n//return fetch(\"http://localhost:3001/api/v1/logout\", {\n//credentials: 'same-origin',\n//method: \"DELETE\"\n//})\n//};\n//}\n"]},"metadata":{},"sourceType":"module"}